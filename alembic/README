# Миграции базы данных в FastAPI

## Описание
Это приложение использует FastAPI и SQLAlchemy для работы с базой данных. Миграции создаются с помощью Alembic.

### Для асинхронного подключения к SQLite нужно установить драйвер aiosqlite.
```bash
pip install aiosqlite==0.17.0
```

### В качестве ORM можно применить SQLAlchemy:
```bash
pip install sqlalchemy==1.4.36
```

### Конфигурация для подключения к базе данных
В файле app/core/config.py укажите строку подключения:
database_url: str = 'sqlite+aiosqlite:///./fastapi.db'

### Миграции через Alembic
Если миграции еще не были инициализированы в вашем проекте, выполните команду:
```bash
pip install alembic==1.7.7
```

## Инициализация Alembic:
Если миграции еще не были инициализированы в вашем проекте, выполните команду:
```bash
alembic init --template async alembic
```

## Команды миграций

### Создать новую миграцию
Создание новой миграции для отслеживания изменений в моделях:
```bash
alembic revision --autogenerate -m "комментарий к миграции"
```

### Применить миграции
Применение всех неприменённых миграций:
```bash
alembic upgrade head
```

### Откатить миграцию
Отмена всех миграций, которые были в проекте:
```bash
alembic downgrade base
```

### Проверить текущую версию миграций
```bash
alembic current
```

### Удалить миграции
Откат миграций (отменить все миграции до миграции с ID 466f1da3d4b1):
```bash
alembic downgrade 466f1da3d4b1
```

## Посмотреть историю миграций:
```bash
alembic history
```